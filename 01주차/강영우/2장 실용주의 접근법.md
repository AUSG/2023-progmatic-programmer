# 2장 실용주의 접근법

# Topic 8. 좋은 설계의 핵심

> 좋은 설계는 나쁜 설계보다 바꾸기 쉽다.
> 
- 너무나도 당연한 이야기
- 잘 설계 되었다는 것은 사용하는 사람에게 적응하여 맞춰진다는 것.
- ETC(Easy To Change)
- 결합도를 줄이면 관심사를 분리함으로써 각각 더 바꾸기 쉬워진다.

## ETC는 규칙이 아니라 가치

- 가치는 우리가 결정을 내리게 도움을 주는 것
- 내가 한 일이 전체 시스템을 바꾸기 쉽게/어렵게 바꾸었는지 계속 체크할 것
- 잘 모르겠으면 다음 두가지 중 하나를 해라
    - 앞으로 어떤 모습으로 바뀔지 잘 모르겠으면, ‘바꾸기 쉽게’라는 길을 선택해라
    - 여러분의 직관을 발전시키는 기회로 삼아라. 이런 일이 있으면 소스코드에 표시를 남겨둬라

# Topic 9. DRY: 중복의 해악

- 지식은 항상 바뀐다.

> DRY: 반복하지 말라
> 
- 모든 지식은 시스템 내에서 단 한번만, 애매하지 않고, 권위있게 표현되어야 한다.
- DRY는 코드 밖에서도 유지되어야 한다. 문서나 이런것들도.
- 모든 코드 중복이 지식의 중복은 아니다. 우연의 일치로 같아지는 경우도 있다.
- 문서화 중복: 함수에 함수가 하는일 모두를 주석으로 달아놓으면 코드와 주석 모두 변경해야하므로 별로다. 네이밍과 코드를 잘 짜서 알수있도록 하자.
- 데이터의 DRY 위반
    - 모듈이 자료구조를 노출하면 언제나 모듈의 구현과 그 자료 구조를 사용하는 코드 사이에 결합이 생긴다.

## 표현상의 중복

- 실제 구현 코드와 외부의 존재 모두 알아야하는 연결점이 있어야하기 때문에 중복을 피할 수 없다. 하지만 완화시켜보자

### 내부 API에서 생기는 중복

- 언어와 기술에 중립적인 형식으로 내부 API를 정의할 수 있는 도구를 찾아보자

### 외부 API에서 생기는 중복

- OpenAPI와 같은 형식으로 짜여진 명세를 API 도구로 불러와서 사용할 수 있다.

### 데이터 저장소와의 중복

- 저장된 데이터를 객체로 옮기기 위한 코드를 손으로 만드는 것이 아니라 스키마로부터 바로 생성하기

### 개발자 간의 중복

- 개발자간에 적극적이고 빈번한 소통이 중요하다.

> 재사용하기 쉽게 만들어라
> 

# Topic 10. 직교성

## 직교성이란

- 일종의 독립성인, 결합도 줄이기를 의미한다.
- 하나가 바뀌어도 나머지에 어떤 영향도 주지 않으면 서로 직교한다.

## 직교성의 장점

- 컴포넌트들이 각기 격리되어있으면 어느 하나를 바꿀 때 나머지 것들을 걱정하지 않아도 된다.
- 생산성 향상과 리스크 감소

## 설계

- 설계가 직교적이려면 특정기능에 대해 요구사항을 대폭 변경하는 경우 단 하나의 모듈이 영향을 받아야 한다.

## 툴킷과 라이브러리

- 도구와 라이브러리를 사용할 때 시스템의 직교성을 해치지 않는지 주의깊게 살표야 한다.

## 코딩

- 코드의 결합도를 줄여라 (부끄럼쟁이 코드)
- 전역 데이터를 피하라
- 유사한 함수를 피하라

## 테스트

- 테스트를 정규 빌드 과정의 일부로 수행하라

# Topic 11. 가역성

> 최종 결정이란 없다.
> 
- 유연하게 설계해서 빠르게 대처 가능하도록 하자.

> 유행을 좇지 말라
> 
- 이것도 가능하고, 저것도 가능하게 설계하라

# Topic 12. 예광탄

- 시스템을 정의하는 중요한 요구사항을 찾고, 의문이 드는 부분이나 가장 위험이 커보이는 곳을 먼저 작성하도록 해라
- 예광탄 코드를 작성하고 확신을 가지면 오류검사, 올바른 구조, 문서화, 자체 검사를 갖추어야 한다.
- 예광탄 코드 접근 방법의 장점
    - 사용자가 뭔가 작동하는 것을 일찍부터 보게 된다.
    - 개발자가 들어가서 일할 수 있는 구조를 얻는다.
    - 통합 과정을 수행할 기반이 생긴다.
    - 보여줄 것이 생긴다.
    - 진행 상황에 대해 더 정확하게 감을 잡을 수 있다.

# Topic 13. 프로토타입과 포스트잇

- 프로토 타입을 꼭 코드로 작성 안해도 되고 포스트잇으로 해도 된다.
- 예광탄이 아닌 프로토타입으로 구현해하는 경우는 “위험을 수반하는 모든 것”

> 프로토타이핑으로 학습하라
> 
- 프로토 타입을 만들때 무시해도 되는 것들
    - 정확성: 더미데이터 사용 가능
    - 완전성: 제한된 방식으로만 사용 가능
    - 안정성: 오류검사 안해도 된다
    - 스타일: 주석과 문서 많지 않아도 된다.

# Topic 14. 도메인 언어

> 문제 도메인에 가깝게 프로그래밍하라.
> 
- 실용주의 프로그래머라면 어떤 경우에는 그 도메인의 실제 어휘와 문법, 의미론을 사용해서 프로그래밍할 수도 있다.
- “내부 도메인 언어”: 호스트 언어를 사용해 결국 컴파일하고 실행할 수 있는 코드
- “외부 언어”: 그들 자체만의 언어를 사용하는 경우
- 외부 언어를 쓰면 파서같은 것들도 만들어야 하므로 시간이 오래걸릴 수 있다. 그러니 기본적으로 YAML, JSON, CSV 같은 외부언어를 사용하자.
- 내부 도메인 언어를 쓰면 개발시간이 빨라지지만 나중에 언어 변경시 종속되어버린다.

# Topic 15. 추정

- 추정하는 법을 배우면 어떤 서브시스템을 최적화해야 하고, 어떤 서브시스템을 그대로 담겨두어도 될지 알 수 있게 된다.

> 추정으로 놀람을 피하라.
> 
- 추정의 단위(시간, 일, 주, 월, 년)를 기준에 맞게 잘하자.
- 추정에 시간을 많이 쏟지말고 비슷한 일을 해본사람에게 물어보자.
- 추정치를 얻는 방법
    - 무엇을 묻고 있는지 이해하라.
    - 시스템의 모델을 만들어라
    - 모델을 컴포넌트로 나눠라
    - 각 매개 변수에 값을 할당하라.
    - 답을 계산하라.
    - 여러분의 추정 실력을 기록하라.
- 프로젝트 일정 추정하기
    - 미사일에 페인트칠하기
    - 코끼리 먹기
    
    > 코드와 함께 일정도 반복하며 조정하라.
    >